/*! For license information please see tool.js.LICENSE.txt */
(()=>{"use strict";var e,t={149:(e,t,n)=>{const r=Vue;var o=!1;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function i(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return"function"==typeof e}function u(e,t){return e<t?e:t}function h(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function f(e){return e[e.length-1]}function p(e){return s(e)?e:[e]}function*g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.reverse)if(null!=e.length)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};t.exclude&&t.exclude(r)||(yield r)}else{if(!c(e))throw"Unsupported type";{const n=Object.keys(e);n.reverse();for(const r of n){const n={value:e[r],key:r};t.exclude&&t.exclude(n)||(yield n)}}}else if(null!=e.length)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};t.exclude&&t.exclude(r)||(yield r)}else{if(!c(e))throw"Unsupported type";for(const n of Object.keys(e)){const r={value:e[n],key:n};t.exclude&&t.exclude(r)||(yield r)}}}function v(e,t){return Object.keys(t).forEach((n=>{!function(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}(e,n,t[n])})),e}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=v({...n},{childrenKey:"children"});const{childrenKey:r}=n,o=s(e)?e:[e];class a{}const l=(e,o,i)=>{n.reverse&&(e=e.slice()).reverse();const s=e.length;for(let c=0;c<s;c++){const d=e[c],u=n.reverse?s-c-1:c,h=i?[...i,u]:[];n.childFirst&&null!=d[r]&&l(d[r],d,h);const f=t(d,u,o,h);if(!1===f)throw new a;if("skip children"!==f){if("skip siblings"===f)break;n.childFirst||null!=d[r]&&l(d[r],d,h)}}};try{l(o,null,s(e)?[]:null)}catch(e){if(!(e instanceof a))throw e}}function y(e,t){const n=function(e,t){let n;return m(e,(function(){if(t(...arguments))return n={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1}),arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return null==n?void 0:n.node}function b(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:o}=n,a=new x;return a.childrenKey=r,m(e,((e,t,n,l)=>{let i=Object.assign({},e);i[r]&&(i[r]=[]),o&&(i=o(i,{oldNode:e,index:t,parent:n,path:l})),a.set(l,i)}),{childrenKey:r}),a.data}class x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i(this,"data",void 0),i(this,"childrenKey","children"),this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return s(t)?t:t[e]}*iteratePath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{childrenKey:n,rootChildren:r}=this;if(t.reverse){const n=[...this.iteratePath(e,{...t,reverse:!1})];n.reverse();for(const{path:e,node:t}of n){const n=e;yield{path:n,node:t}}}else{let t=[],o=r;for(const r of e){const e=[...t,r],a=o[r];yield{path:e,node:a},t=e,o=a[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return f(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(null==e||0===e.length)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:r}=this;const{parent:o,index:a}=this.getParentAndIndex(e);let l;1===e.length?(r||(this.data?this.data[n]=[]:this.data=[]),l=r):(o[n]||(o[n]=[]),l=o[n]),l[a]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:r,index:o}=this.getParentAndIndex(e),a=1===e.length?n:r[t],l=a[o];return a.splice(o,1),l}walk(e,t){const{childrenKey:n,data:r}=this;return m(r,e,n,t)}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(this.data),function(e){const t={};return Object.keys(e).forEach((n=>{void 0!==e[n]&&(t[n]=e[n])})),t}({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d(e)?e(...t):e}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];let r;const o={};let a=o;return{action:function(){for(var l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];if(0===i.length)return a===o&&(a=e()),a;if(r||(r=new F),!r.has(i)&&(r.set(i,e(...i)),null!=t.capacity)){n.push(i);const e=n.splice(0,n.length-t.capacity);for(const t of e)r.delete(t)}return r.get(i)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function k(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}function E(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const e=t.top-document.documentElement.clientTop,n=t.bottom,r=t.left-document.documentElement.clientLeft,o=t.right,a={top:e,right:o,bottom:n,left:r,width:t.width||o-r,height:t.height||n-e,x:r,y:e};t={...a,toJSON:()=>a}}return t}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const e=n.until&&r===n.until;if(e&&!n.withUntil)return;const o=t(r);if("break"===o)return;if(o)return r;if(e)return;r=r.parentElement}}function O(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function C(e,t){for(const n of t)if(O(e,n))return!0;return!1}function _(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function N(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function L(e,t){return getComputedStyle(e)[t]}function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:o}=n;const{returnNearestIfNoHit:a,maxTimes:l}=n;let i,s;null==r&&(r=0,o=e.length-1);let c,d=0;for(;r>=0&&r<=o;){if(d>=l)throw Error("binarySearch: loop times is over ".concat(l,", you can increase the limit."));i=Math.floor((o-r)/2+r),s=e[i];const n=d+1;if(c=t(s,i,n),c>0)o=i-1;else{if(!(c<0))return{index:i,value:s,count:n,hit:!0};r=i+1}d++}return a?{index:i,value:s,count:d+1,hit:!1,greater:c>0}:null}function T(e){return{storage:e,set(e,t,n){null==t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify({value:t,expired_at:n?(new Date).getTime()+60*n*1e3:null}))},get(e){let t=this.storage.getItem(e);if(t){if(t=JSON.parse(t),!t.expired_at||t.expired_at>(new Date).getTime())return t.value;this.storage.removeItem(e)}return null},clear(){this.storage.clear()}}}S((function(){return T(localStorage)})),S((function(){return T(sessionStorage)}));class F{constructor(){i(this,"_map",new Map),i(this,"_values",{}),i(this,"_objCount",0)}_keysToString(e){const{_map:t}=this;let n=[];for(const r of e){if(!t.has(r))return null;n.push(t.get(r)[0])}return n.toString()}has(e){return null!=this._keysToString(e)}get(e){const{_values:t}=this,n=this._keysToString(e);if(null==n)throw"Value not found by specified keys";return t[n][1]}set(e,t){const{_map:n,_values:r}=this;let o=[];for(const t of e){let e,r=1;n.has(t)?([e,r]=n.get(t),r++):(this._objCount++,e=this._objCount.toString()),n.set(t,[e,r]),o.push(e)}r[o.toString()]=[e.slice(),t]}delete(e){const{_values:t,_map:n}=this,r=this._keysToString(e);if(null==r)throw"Value not found by specified keys";delete t[r];for(const t of e){let[e,r]=n.get(t);r--,0===r?n.delete(t):n.set(t,[e,r])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:e}=this;for(const t in e){const[n,r]=e[t];yield[n,r]}}count(){return[...this.entries()].length}}var P=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n};const j=(0,r.defineComponent)({props:{table:Boolean}}),V={key:0},K={key:1};var A=P(j,[["render",function(e,t,n,o,a,l){return e.table?((0,r.openBlock)(),(0,r.createElementBlock)("table",V,[(0,r.renderSlot)(e.$slots,"prepend"),(0,r.createElementVNode)("tbody",null,[(0,r.renderSlot)(e.$slots,"default")]),(0,r.renderSlot)(e.$slots,"append")])):((0,r.openBlock)(),(0,r.createElementBlock)("div",K,[(0,r.renderSlot)(e.$slots,"prepend"),(0,r.renderSlot)(e.$slots,"default"),(0,r.renderSlot)(e.$slots,"append")]))}]]);const I=(0,r.defineComponent)({components:{VirtualListTable:A},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=(0,r.ref)(0),n=(0,r.ref)(e.firstRender-1),o=(0,r.computed)((()=>{var t;return u(n.value,((null==(t=e.items)?void 0:t.length)||1)-1)})),a=(0,r.ref)(0),l=(0,r.computed)((()=>g.value[t.value]?_(t.value):0)),i=(0,r.computed)((()=>g.value.length>0?_(g.value.length-1)+f(p.value):0)),s=(0,r.computed)((()=>g.value[o.value]?i.value-_(o.value)-p.value[o.value]:0)),c=(0,r.computed)((()=>e.disabled?{}:{overflow:"auto"})),d=(0,r.computed)((()=>{const t={display:"flex"};return e.disabled||(e.horizontal?Object.assign(t,{"margin-left":l.value+"px","margin-right":s.value+"px",width:i.value-s.value-l.value+"px"}):Object.assign(t,{"margin-top":l.value+"px","margin-bottom":s.value+"px"})),t["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete t.display,delete t["flex-direction"]),t})),h=(0,r.computed)((()=>(0,r.reactive)((e.items||[]).map((()=>null))))),p=(0,r.computed)((()=>(e.items||[]).map(((t,n)=>{var r;if(null!=h[n])return h[n];let o=null==(r=e.itemSize)?void 0:r.call(e,t,n);return null==o&&(o=a.value),o})))),g=(0,r.computed)((()=>{const e=[];return p.value.reduce(((t,n)=>(e.push(t),t+n)),0),e}));(0,r.watch)((()=>e.items),S);const v=(0,r.computed)((()=>{if(!e.items||e.disabled)return;const n=[];for(let r=t.value;r<=o.value;r++){const t=e.items[r];if(!t)break;n.push({item:t,index:r})}return n})),m=(0,r.ref)(),y=(0,r.ref)();let b;(0,r.onMounted)((async()=>{S();try{!function(){const e=m.value;new ResizeObserver((e=>{for(let t of e)if(O(t.target,"vtlist")){S();break}})).observe(e)}()}catch(e){await(0,r.nextTick)(),S()}}));let x=!1,w=!1;async function S(){var o;if(x)return void(w=!0);if(!e.items||e.disabled)return;x=!0;const l=m.value,i=null==(o=y.value)?void 0:o.$el;if(!l||!i)return;let s;a.value||(a.value=function(){const t=10,n=[],r=e.table?i.querySelector("tbody").children:i.children;for(let e=0;e<r.length;e++){const o=r[e],a=getComputedStyle(o);if(["absolute","fixed"].includes(a.position))continue;const l=E(o);if(n.push(l),n.length>=t)break}if(0===n.length)return 0;return n.reduce(((e,t)=>e+t),0)/n.length}()),t.value=function(){const t=D(l)-C(l)-e.buffer;return B(g.value,(e=>e-t),{returnNearestIfNoHit:!0}).index}(),n.value=function(){const t=D(l)-C(l)+k(l)+e.buffer;return B(g.value,(e=>e-t),{returnNearestIfNoHit:!0}).index}(),await(0,r.nextTick)();let c=0;const d={},u=e.table?i.querySelector("tbody").children:i.children;for(let e=0;e<u.length;e++){const n=u[e],r=L(n,"position");if(r&&["absolute","fixed"].includes(r))continue;const o="none"!==L(n,"display")?E(n):0,a=n.getAttribute("vt-index"),l=a?parseInt(a):t.value+c;d[l]=(d[l]||0)+o,c++}for(const e of Object.keys(d)){const t=parseInt(e);h.value[t]!==d[t]&&(h.value[t]=d[t],s=!0)}s&&await(0,r.nextTick)(),x=!1,w&&(w=!1,S())}function k(t){const n=getComputedStyle(t);let r=parseFloat(e.horizontal?n.width:n.height);return"border-box"===n.boxSizing&&(r=e.horizontal?r-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):r-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)),r}function E(t){let n=k(t);const r=getComputedStyle(t);return e.horizontal?n+=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)+parseFloat(r.marginLeft)+parseFloat(r.marginRight):n+=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth)+parseFloat(r.marginTop)+parseFloat(r.marginBottom),n=Number.isNaN(n)?0:n,n}function D(t){return e.horizontal?t.scrollLeft:t.scrollTop}function C(t){const n=getComputedStyle(t);return e.horizontal?parseFloat(n.paddingLeft):parseFloat(n.paddingTop)}function _(e){return g.value[e]}return{listElRef:m,listInnerRef:y,onscroll:function(){const t=m.value;if(!t)return;const n=D(t);null!=b&&e.buffer-Math.abs(n-b)>=10||(b=n,S())},listStyle:c,listInnerStyle:d,visibleItemsInfo:v,getItemKey:function(t,n){if(e.itemKey){if("string"==typeof e.itemKey&&"index"===e.itemKey)return n;if("function"==typeof e.itemKey)return e.itemKey(t,n)}},update:S,sizes:p,positions:g,runtimeSizes:h}}});var H=P(I,[["render",function(e,t,n,o,a,l){const i=(0,r.resolveComponent)("VirtualListTable");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vtlist",ref:"listElRef",style:(0,r.normalizeStyle)(e.listStyle),onScrollPassive:t[0]||(t[0]=(...t)=>e.onscroll&&e.onscroll(...t))},[(0,r.createVNode)(i,{class:"vtlist-inner",ref:"listInnerRef",style:(0,r.normalizeStyle)(e.listInnerStyle),table:e.table},{prepend:(0,r.withCtx)((()=>[(0,r.renderSlot)(e.$slots,"prepend")])),append:(0,r.withCtx)((()=>[(0,r.renderSlot)(e.$slots,"append")])),default:(0,r.withCtx)((()=>[e.disabled?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(e.items,((t,n)=>(0,r.renderSlot)(e.$slots,"default",{key:e.getItemKey(t,n),item:t,index:n}))),128)):((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:1},(0,r.renderList)(e.visibleItemsInfo,(({item:t,index:n})=>(0,r.renderSlot)(e.$slots,"default",{key:e.getItemKey(t,n),item:t,index:n}))),128))])),_:3},8,["style","table"])],36)}]]);const M="children";const z={childrenKey:"children",defaultOpen:!1,statsHandler:e=>e,statsFlatHandler:e=>e,afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler:e=>e};class $ extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}const U={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},R={isTouch:e=>e.type&&e.type.startsWith("touch"),_getStore:e=>(e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore),on(e,t,n,r){const{args:o,mouseArgs:a,touchArgs:l}=W(r),i=this._getStore(e),s=this,c=function(e){let r;if(s.isTouch(e))r={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY};else if(r={x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY},"start"===t&&1!==e.which)return;return n.call(this,e,r)};i.push({handler:n,wrapper:c}),_.call(null,e,U[t][0],c,...o,...a),_.call(null,e,U[t][1],c,...o,...l)},off(e,t,n,r){const{args:o,mouseArgs:a,touchArgs:l}=W(r),i=this._getStore(e);for(let r=i.length-1;r>=0;r--){const{handler:l,wrapper:s}=i[r];n===l&&(N.call(null,e,U[t][0],s,...o,...a),N.call(null,e,U[t][1],s,...o,...a),i.splice(r,1))}}};function W(e){e||(e={});return{args:e.args||[],mouseArgs:e.mouseArgs||[],touchArgs:e.touchArgs||[]}}const Y=new Map,X={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},q=X;function G(e){e.dataTransfer&&(e.dataTransfer.dropEffect=q.dropEffect)}function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Y.has(e))throw"Already registered on specified element";const n={...t},r=n;function o(e){var t;const r=e.target;r.nodeType===Node.ELEMENT_NODE&&(q.triggerElement=r);const o=r;if(n.ingoreHTMLTags&&o.tagName&&n.ingoreHTMLTags.find((e=>e.toUpperCase()===o.tagName)))return;const a=null===(t=n.beforeDragStart)||void 0===t?void 0:t.call(n,e);a&&(a.setAttribute("draggable","true"),q.dragElement=a)}function a(e){var t;q.internal=!0,null===(t=n.onDragStart)||void 0===t||t.call(n,e),G(e)}function l(e){var t;null===(t=n.onDrag)||void 0===t||t.call(n,e),G(e)}function i(e){var t;null===(t=n.onDragEnd)||void 0===t||t.call(n,e),q.internal=!1,q.dragElement&&q.dragElement.removeAttribute("draggable"),q.triggerElement=null,q.dragElement=null,q.dropEffect="none"}v(n,Z),R.on(e,"start",o,{touchArgs:[{passive:!0}]}),R.on(e,"end",(function(e){q.dragElement&&q.dragElement.removeAttribute("draggable")}));const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e;let r=!1;const o=e=>{var n;r=!0,null===(n=t.onEnter)||void 0===n||n.call(t,e),d.resume()},a=e=>{var n;ee(e.target),null===(n=t.onDragEnter)||void 0===n||n.call(t,e),r||o(e)},l=e=>{var n;r||o(e),null===(n=t.onDragOver)||void 0===n||n.call(t,e)},i=e=>{var o;null===(o=t.onDragLeave)||void 0===o||o.call(t,e);const a=function(){var n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r=!1,null===(n=t.onLeave)||void 0===n||n.call(t,o),d.stop()},l=Q;Q=null,l&&function(e,t){for(;;){if(null==e.parentNode)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}(l,n)||a()},s=e=>{var n;null===(n=t.onDrop)||void 0===n||n.call(t,e)},c=e=>{var n;e instanceof KeyboardEvent&&"Escape"!==e.key||(r=!1,d.stop(),null===(n=t.onEndBeforeLeave)||void 0===n||n.call(t,e))},d=function(e){let t=[];const n=()=>{if(!r.listening){for(const n of e){_.apply(this,n);const e=()=>N.apply(this,n);t.push(e)}r.listening=!0}},r={listening:!1,stop:()=>{if(r.listening){for(const e of t)e();t=[],r.listening=!1}},resume:n,start:n};return r.start(),r}([[e,"drop",c],[window,"mouseup",c],[window,"touchend",c],[window,"keydown",c]]);d.stop();const u=()=>{N(e,"dragenter",a),N(e,"dragover",l),N(e,"dragleave",i),N(e,"drop",s),d.stop()};return(()=>{_(e,"dragenter",a);_(e,"dragover",l);_(e,"dragleave",i);_(e,"drop",s)})(),u}(e,{onDragLeave(e){var t;null===(t=n.onDragLeave)||void 0===t||t.call(n,e),G(e)},onDragEnter(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDragEnter)||void 0===t||t.call(n,e),G(e)},onDragOver(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDragOver)||void 0===t||t.call(n,e),G(e)},onDrop(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDrop)||void 0===t||t.call(n,e)},onEnter(e){var t;null===(t=n.onEnter)||void 0===t||t.call(n,e)},onLeave(e){var t;null===(t=n.onLeave)||void 0===t||t.call(n,e)}});_(e,"dragstart",a),_(e,"drag",l),_(e,"dragend",i);return Object.assign(n,{root:e,destroy:()=>{R.off(e,"start",o,{touchArgs:[{passive:!0}]}),N(e,"dragstart",a),N(e,"drag",l),N(e,"dragend",i),s(),Y.delete(e)}}),Y.set(e,r),r}const Z={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault:e=>!!X.dragElement||q.preventDefault,beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let Q=null;const ee=e=>{Q=e,setTimeout((()=>{Q=null}),20)};var te=Object.defineProperty,ne=Object.defineProperties,re=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t)=>{for(var n in t||(t={}))ae.call(t,n)&&ie(e,n,t[n]);if(oe)for(var n of oe(t))le.call(t,n)&&ie(e,n,t[n]);return e},ce=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n};let de=!1;const ue=(0,r.defineComponent)({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=(0,r.computed)((()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"})));(0,r.watch)((()=>e.stat.checked),(n=>{de||e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)})),(0,r.watch)((()=>e.stat.open),(n=>{de||(t(n?"open":"close",e.stat),de=!0,setTimeout((()=>{de=!1}),100))}));return{indentStyle:n,vLines:(0,r.computed)((()=>{const t=[],n=e=>{var t;if(e.parent){let n=null==(t=e.parent)?void 0:t.children.indexOf(e);for(;;){n++;let t=e.parent.children[n];if(!t)break;if(!t.hidden)return!0}}return!1},r=e.rtl?"right":"left",o=e.btt?"top":"bottom";let a=e.stat;for(;a;){let l=(a.level-2)*e.indent+e.treeLineOffset;const i=n(a),s=()=>{t.push({style:{[r]:l+"px",[o]:i?0:"50%"}})};a===e.stat?a.level>1&&s():i&&s(),a=a.parent}return t})),hLineStyle:(0,r.computed)((()=>{let t=(e.stat.level-2)*e.indent+e.treeLineOffset;const n=e.rtl?"right":"left";return{[n]:t+"px"}}))}}}),he={class:"tree-node-inner"},fe={key:1,class:"tree-node",ref:"el"};var pe=ce(ue,[["render",function(e,t,n,o,a,l){return e.table?((0,r.openBlock)(),(0,r.createElementBlock)("tr",fe,[(0,r.renderSlot)(e.$slots,"default",{indentStyle:e.indentStyle})],512)):((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:(0,r.normalizeStyle)(e.indentStyle),ref:"el"},[e.treeLine?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.vLines,(e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"tree-line tree-vline",style:(0,r.normalizeStyle)(e.style)},null,4)))),256)),e.stat.level>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"tree-line tree-hline",style:(0,r.normalizeStyle)(e.hLineStyle)},null,4)):(0,r.createCommentVNode)("",!0)],64)):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",he,[(0,r.renderSlot)(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}]]);function ge(e,t={}){var n;return function(e){const t={...z,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:e,childrenKey:t}=this,n=new x([]);this._statsMap=new Map,m(e,((e,t,r,o)=>{const a=this.statHandler({isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null,data:e,open:Boolean(this.defaultOpen),parent:n.getParent(o),children:[],level:o.length});this._statsMap.set(e,a),n.set(o,a)}),{childrenKey:t});const r=[];n.walk((e=>{r.push(e)})),this.stats=this.statsHandler(n.rootChildren),this.statsFlat=this.statsFlatHandler(r),this.initialized=!0},getStat(e){let t=this._statsMap.get(e);if(!t)throw new $("Stat not found");return t},has(e){if(e.isStat)return this.statsFlat.indexOf(e)>-1;try{let t=this.getStat(e);return Boolean(t)}catch(e){if(e instanceof $)return!1;throw e}},_getPathByStat(e){if(null==e)return[];const t=this.getSiblings(e).indexOf(e);return[...e.parent?this._getPathByStat(e.parent):[],t]},afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=e=>{const{parent:t}=e;if(t){let e,r;for(const n of t.children)if(n.checked||0===n.checked)e=!0;else if(r=!0,e&&r)break;const o=!r||!!e&&0;t.checked!==o&&(this._ignoreCheckedOnce(t),t.checked=o),n(t)}};return n(e),m(e.children,(e=>{e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}),{childrenKey:M}),!0},_ignoreCheckedOnce(e){e._ignoreCheckedOnce=!0,setTimeout((()=>{e._ignoreCheckedOnce&&(e._ignoreCheckedOnce=!1)}),100)},isVisible(e){const t=e.isStat?e:this.getStat(e),n=e=>!e||!e.hidden&&e.open&&n(e.parent);return Boolean(!t.hidden&&n(t.parent))},updateCheck(){m(this.stats,(e=>{if(e.children&&e.children.length>0){const t=e.children.every((e=>e.checked));e.checked!==t&&(this._ignoreCheckedOnce(e),e.checked=t)}}),{childFirst:!0,childrenKey:M})},getChecked(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.statsFlat.filter((t=>t.checked||e&&0===t.checked))},getUnchecked(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.statsFlat.filter((t=>e?!t.checked:!1===t.checked))},openAll(){for(const e of this.statsFlat)e.open=!0},closeAll(){for(const e of this.statsFlat)e.open=!1},openNodeAndParents(e){const t=e.isStat?e:this.getStat(e);for(const e of this.iterateParent(t,{withSelf:!0}))e.open=!0},_calcFlatIndex(e,t){let n=e?this.statsFlat.indexOf(e)+1:0;const r=e?e.children:this.stats;for(let e=0;e<t;e++)n+=this._count(r[e]);return n},add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const r=t?t.children:this.stats;null==n&&(n=r.length);const o=this.statHandler({isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null,open:Boolean(this.defaultOpen),data:e,parent:t||null,children:[],level:t?t.level+1:1});this._setPosition(o,t||null,n);const a=e[this.childrenKey];if(a){const e=a.slice();for(const t of e)this.add(t,o)}},remove(e){const t=this.getSiblings(e);if(t.includes(e)){h(t,e);const n=this._flat(e);this.statsFlat.splice(this.statsFlat.indexOf(e),n.length);for(const e of n)this._statsMap.delete(e.data);return this.afterRemoveStat(e),!0}return!1},getSiblings(e){const{parent:t}=e;return t?t.children:this.stats},_setPosition(e,t,n){(t?t.children:this.stats).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const r=this._calcFlatIndex(t,n),o=this._flat(e);this.statsFlat.splice(r,0,...o);for(const e of o)this._statsMap.has(e.data)||this._statsMap.set(e.data,e);m(e,((e,t,n)=>{n&&(e.level=n.level+1)}),{childrenKey:M}),this.afterSetStat(e,t,n)},*iterateParent(e,t){let n=null!=t&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent},move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to it self");if(t&&e.level<t.level){let n;for(const r of this.iterateParent(t))if(r.level===e.level){n=r;break}if(e===n)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0},_flat(e){const t=[];return m(e,(e=>{t.push(e)}),{childrenKey:M}),t},_count(e){return this._flat(e).length},getData(e,t){const{childrenKey:n}=this,r=new x([]);return r.childrenKey=n,m(t||this.stats,((t,o,a,l)=>{let i={...t.data,[n]:[]};e&&(i=e(i)),r.set(l,i)}),{childrenKey:M}),r.data}},n=t;return t.noInitialization||n.init(),n}(e,(n=se({},t),ne(n,re({statHandler(e){return this._statHandler2&&(e=this._statHandler2(e)),ve(t.statHandler,(0,r.reactive)(e))},statsHandler:e=>ve(t.statsHandler,(0,r.reactive)(e)),statsFlatHandler:e=>ve(t.statsFlatHandler,(0,r.reactive)(e))}))))}function ve(e,t){return e?e(t):t}const me=(0,r.defineComponent)({components:{VirtualList:H,TreeNode:pe},props:{value:{required:o,type:Array},modelValue:{required:!0,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>ge([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter((e=>t(e)))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return"disabled"!==this.updateBehavior&&(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:xe(ye("getStat")),has:xe(ye("has")),updateCheck:ye("updateCheck"),getChecked:ye("getChecked"),getUnchecked:ye("getUnchecked"),openAll:ye("openAll"),closeAll:ye("closeAll"),openNodeAndParents:ye("openNodeAndParents"),isVisible:ye("isVisible"),move:be("move"),add:xe(be("add")),addMulti(e,t,n){this.batchUpdate((()=>{let r=n;for(const n of e)this.add(n,t,r),null!=r&&r++}))},remove:ye("remove"),removeMulti(e){this.batchUpdate((()=>{for(const t of e)this.remove(t)}))},iterateParent:ye("iterateParent"),getSiblings:ye("getSiblings"),getData:ye("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue("new"===this.updateBehavior?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=e=>{if(e){const{childrenKey:t}=this;return e[t]||(e[t]=[]),e[t]}return this.valueComputed};e._statHandler2=this.statHandler?e=>e.data===this.placeholderData?e:this.statHandler(e):null,e.afterSetStat=(e,n,r)=>{const{childrenKey:o,updateBehavior:a}=this;let l=this.valueComputed;if("new"===a){if(this.batchUpdateWaiting)return;l=this.getData()}else if("modify"===a){const o=t(null==n?void 0:n.data);o.includes(e.data)||o.splice(r,0,e.data)}this.batchUpdateWaiting||this._updateValue(l)},e.afterRemoveStat=e=>{var n;const{childrenKey:r,updateBehavior:o}=this;let a=this.valueComputed;if("new"===o){if(this.batchUpdateWaiting)return;a=this.getData()}else if("modify"===o){h(t(null==(n=e.parent)?void 0:n.data),e.data)}this.batchUpdateWaiting||this._updateValue(a)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,function(e,t){let n=new Set(t);const r={};return n.forEach((t=>{r[t]=e[t]})),r}(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this.dragOvering||this.dragNode||this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){!1===this.watermark&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;")))}});function ye(e){return function(...t){return this.processor[e](...t)}}function be(e){return function(...t){return this.batchUpdate((()=>this.processor[e](...t)))}}function xe(e){return function(t,...n){return t&&(t=(0,r.reactive)(t)),e.call(this,t,...n)}}const we={key:0,class:"drag-placeholder he-tree-drag-placeholder"},Se=["colspan"],ke={class:"drag-placeholder he-tree-drag-placeholder"};var Ee=ce(me,[["render",function(e,t,n,o,a,l){const i=(0,r.resolveComponent)("TreeNode"),s=(0,r.resolveComponent)("VirtualList");return(0,r.openBlock)(),(0,r.createBlock)(s,{class:(0,r.normalizeClass)(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:(0,r.withCtx)((()=>[(0,r.renderSlot)(e.$slots,"prepend",{tree:e.self})])),default:(0,r.withCtx)((({item:n,index:o})=>[(0,r.createVNode)(i,{"vt-index":o,class:(0,r.normalizeClass)([n.class,{"drag-placeholder-wrapper":n.data===e.placeholderData,"dragging-node":n===e.dragNode}]),style:(0,r.normalizeStyle)(n.style),stat:n,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:t=>e.$emit("click:node",n),onOpen:t[0]||(t[0]=t=>e.$emit("open:node",t)),onClose:t[1]||(t[1]=t=>e.$emit("close:node",t)),onCheck:t[2]||(t[2]=t=>e.$emit("check:node",t))},{default:(0,r.withCtx)((({indentStyle:t})=>[n.data===e.placeholderData?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[e.table?((0,r.openBlock)(),(0,r.createElementBlock)("td",{key:1,style:(0,r.normalizeStyle)(t),colspan:e.placeholderColspan},[(0,r.createElementVNode)("div",ke,[(0,r.renderSlot)(e.$slots,"placeholder",{tree:e.self})])],12,Se)):((0,r.openBlock)(),(0,r.createElementBlock)("div",we,[(0,r.renderSlot)(e.$slots,"placeholder",{tree:e.self})]))],64)):(0,r.renderSlot)(e.$slots,"default",{key:1,node:n.data,stat:n,indentStyle:t,tree:e.self},(()=>[(0,r.createTextVNode)((0,r.toDisplayString)(n.data[e.textKey]),1)]))])),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])])),append:(0,r.withCtx)((()=>[(0,r.renderSlot)(e.$slots,"append",{tree:e.self})])),_:3},8,["class","items","disabled","table","itemKey"])}]]);let De,Oe,Ce,_e,Ne,Le,Be=null,Te=null;const Fe=(0,r.defineComponent)({extends:Ee,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function},ondragstart:{type:Function}},data:()=>({treeDraggableInstance:null}),computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return null==t?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(null!=e.draggable)return e.draggable;if(this.eachDraggable){const t=this.eachDraggable(e);if(null!=t)return t}const{parent:t}=e;return!t||this.isDraggable(t)},isDroppable(e){if(this.disableDrop)return!1;if(!e)return w(this.rootDroppable,[this,Be]);if(null!=e.droppable)return e.droppable;if(this.eachDroppable){const t=this.eachDroppable(e);if(null!=t)return t}const{parent:t}=e;return!t||this.isDroppable(t)},_eachDroppable(){var e;return w(null==(e=this._isDragCopy)?void 0:e.call(this),[this])}},mounted(){const e=(e,t)=>{let n=!0;return Be&&Be!==this&&(n=n&&this._isMoved),this.table&&!this._isDragCopy&&(n=n&&this._isDragCopy),n&&(e.x!==t.x||e.y!==t.y)},t=(e,t)=>{Te.ignoreUpdate((()=>{if(!Te.has(Te.placeholderData)){if(Te.table){let e=0;const t=Te.getRootEl().querySelector("tr");if(t)for(const{value:n}of g(t.children))"none"!==L(n,"display")&&(e+=n.colSpan||1);e<1&&(e=1),Te.placeholderColspan=e}Te.add(Te.placeholderData)}const n=Te.getStat(Te.placeholderData);Te.move(n,e,t)}))},n=()=>{const e=this;if(e.has(e.placeholderData))return e.remove(e.getStat(e.placeholderData)),!0},r=e=>{X.dropEffect=e?(null==Be?void 0:Be.dragCopy)?"copy":"move":"none"},o=e=>{const t=this;e?r(!0):t.keepPlaceholder?t.has(t.placeholderData)||r(!1):(n(),r(!1))};let a={x:0,y:0};const l=this.getRootEl();let i=null;const s=()=>{(null==Te?void 0:Te.has(Te.placeholderData))&&Te.ignoreUpdate((()=>{Te.remove(Te.getStat(Te.placeholderData)),Be&&(Be.dragNode.hidden=!1,Be.dragOvering=!1)}))};var c,d;this.treeDraggableInstance=J(l,{beforeDragStart:e=>{if(!X.triggerElement)return;let t=this.triggerClass;t&&0!==t.length||(t="tree-node");let n=p(t),r=D(X.triggerElement,(e=>!!C(e,n)||(O(e,"tree-node")?"break":void 0)),{withSelf:!0,until:l});if(i=D(r,(e=>{if(O(e,"tree-node"))return!0}),{withSelf:!0,until:l}),i){if(Le=this.getNodeByElement(i),!Le)throw"Can't find drag node";if(this.isDraggable(Le))return this.$emit("before-drag-start",Le),this.$emit("beforeDragStart",Le),l}},onDragStart:e=>{var n,r,o;if(!i||!Le)return;{const{x:t,y:r}=i.getBoundingClientRect(),{clientX:o,clientY:a}=e;null==(n=e.dataTransfer)||n.setDragImage(i,o-t,a-r)}const a={x:e.clientX,y:e.clientY};Ne=a,Be=this,Be.dragNode=Le,_e=(()=>{if("mouse"===this.resolveStartMovePoint)return{x:e.clientX,y:e.clientY};if("function"==typeof this.resolveStartMovePoint)return this.resolveStartMovePoint(i);{let e,t=0;if(this.table){let n=i.getBoundingClientRect();e={x:n.x,y:n.y},this.rtl&&(e.x=n.right),t=n.height}else if(this.rtl){const n=i.children[0].getBoundingClientRect();e={x:n.right,y:n.y},t=n.height}else e=i.children[0].getBoundingClientRect().toJSON(),t=e.height;return this.btt&&(e.y+=t),e}})(),this.dragOvering=!0;const l=Be.getSiblings(Be.dragNode),s=l.indexOf(Le);De={tree:Be,dragNode:Le,parent:Le.parent,siblings:l,indexBeforeDrop:s},Te=this,null==(r=e.dataTransfer)||r.setData("text",`he-tree drag start at ${(new Date).toISOString()}`),Be._eachDroppable()||setTimeout((()=>{Le.hidden=!0,t(Le.parent,s+1)}),0),null==(o=this.ondragstart)||o.call(this,e)},onEnter:e=>{this.$emit("enter",e)},onLeave:e=>{Ce=null,this.dragOvering=!1,X.preventDefault=!1,n(),this.$emit("leave",e)},onDragOver:(c=n=>{if(!Be){if(!this.onExternalDragOver||!1===this.onExternalDragOver(n))return;X.preventDefault=!0}const r={x:n.clientX,y:n.clientY},l=e(r,a);if(a=r,!l)return;this.dragOvering=!0,Te=this;const i=_e?{x:_e.x+(r.x-Ne.x),y:_e.y+(r.y-Ne.y)}:se({},r),{btt:s,rtl:c}=Te;if(Te.disableDrop)return void(X.dropEffect="none");let d,u;const h=Te.getRootEl().querySelectorAll(".tree-node"),f=[];h.forEach((e=>{C(e,["drag-placeholder-wrapper","dragging-node"])||"none"===L(e,"display")||f.push(e)}));const p=B(f,(e=>E(e)[s?"bottom":"top"]-i.y),{returnNearestIfNoHit:!0});let g,v,y=null;p.hit||(p.greater?s||(y=p.index-1,f[y]||y++):s&&(y=p.index+1,f[y]||y--)),null==y&&(y=p.index),g=f[y],v=s?f[y-1]:f[y+1],d=g&&Te.getNodeByElement(g),u=v&&Te.getNodeByElement(v);const{indent:b}=Te,x=S((()=>{if(Te.table){let e=E(g).toJSON();const t=b*(d.level-1);return c?(e.width-=t,e.right-=t):e.x+=t,e}return E(g.firstElementChild)})).action,w=S((()=>s?i.y>x().y+x().height/2:i.y<x().y+x().height/2)).action,D=S((()=>s?!g||y===f.length-1&&w():!g||0===y&&w())).action,O=S((()=>c?i.x-(x().x+x().width):x().x-i.x)).action,_=S((()=>c?i.x<x().x+x().width-b:i.x>x().x+b)).action;let N;if(D())N=1,d=null;else{if(!d)return;N=O()>0?d.level-Math.ceil(O()/b):_()?d.level+1:d.level}u&&N<u.level&&(N=u.level),(async()=>{let e,t,n=!1,r=null;const o=async()=>{if(!Te.isDroppable(d)||!await(async e=>{if(e.open)return!0;if(!Te.dragOpen)return!1;if(!Te.dragOpenDelay)return e.open=!0,!0;if(r=e,Ce!==e){let t=k();Ce=e;const o=e;return setTimeout((async()=>{o!==Ce?(n=!0,t.resolve(!0)):(Te.beforeDragOpen&&await Te.beforeDragOpen(e),o!==Ce?(n=!0,t.resolve(!0)):(e.open=!0,r=null,t.resolve(!0)))}),Te.dragOpenDelay),await t.promise}n=!0})(d))return!1;n||(e=d,t=null)},a=(n=N)=>{let r=d,o=[];for(;r&&r.level>=n;)r=r.parent||null,o.unshift(r);let a=0;for(const n of o){if(Te.isDroppable(n))return e=n,t=o[a+1]||d,!0;a++}return!1};d?N>d.level?!1===await o()&&a(d.level):!1===a()&&await o():Te.isDroppable(null)&&(e=null),Ce=r;const l=Boolean(!n&&(e||null===e));return{cancelled:n,success:l,parent:e,index:l?t?(e?e.children:Te.stats).filter((e=>e.data!==Te.placeholderData)).indexOf(t)+1:0:-1}})().then((e=>{if(!e.cancelled)if(e.success){if(null!=Te.maxLevel&&Te.maxLevel>0){let t=1;if(Be){const e=Be.dragNode;let n=0;m(e,(e=>{e.level>n&&(n=e.level)}),{childrenKey:M}),t=n-e.level+1}if(t+(e.parent?e.parent.level:0)>Te.maxLevel)return void o(!1)}o(!0),t(e.parent,e.index)}else o(!1)}))},d=()=>{},function(){let e,t;try{e=c(...arguments)}catch(e){t=e}finally{d()}if(t)throw t;return e}),onDrop:e=>{Te=this;const t=!Be;if(!Te)return;const n=null==Be?void 0:Be.dragNode;let r,o=(()=>{var o;let a=!0;if(Te.has(Te.placeholderData)){if(t)r=null==(o=this.externalDataHandler)?void 0:o.call(this,e),a=null!=r;else if(!Be.dragCopy){const e=Te.getStat(Te.placeholderData);Be===Te&&e.parent===n.parent&&y(n,(t=>t===e))}}else a=!1;return a})();if(o){const e=Te.getStat(Te.placeholderData),t=Te.getSiblings(e);Oe={tree:Te,dragNode:n,parent:e.parent,siblings:t,indexBeforeDrop:t.indexOf(e)}}(()=>{if(s(),o){let e=Oe.indexBeforeDrop;Be&&!Be.dragCopy&&Be===Te&&De.parent==Oe.parent&&De.indexBeforeDrop<e&&e--,Be&&Be!==Te&&!Be._eachDroppable()&&Be.batchUpdate((()=>{Be.remove(n),Be.updateCheck()})),Te.batchUpdate((()=>{let t,n=null==Be?void 0:Be.dragNode;r?t=r:Be._eachDroppable()&&(t=b(Be.dragNode.data,{childrenKey:Be.childrenKey}),Be.dragCopyDataHandler&&(t=Be.dragCopyDataHandler(t))),t&&(Te.add(t),n=Te.getStat(t)),Te.move(n,Oe.parent,e),Te.updateCheck()}))}Te.$emit("after-drop"),o&&(Be&&(Be.dragCopy||Be.$emit("change")),Te!==Be&&Te.$emit("change"))})()},onDragEnd:e=>{s(),Be&&(Be.dragNode&&(Be.dragNode.hidden=!1),Be.dragNode=null,Be.dragOvering=!1,Be=null),Te=null,Ce=null,Le=null}})},unmounted(){var e;null==(e=this.treeDraggableInstance)||e.destroy()}});const Pe=(0,r.defineComponent)({props:{open:{type:Boolean}}}),je=[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,r.createElementVNode)("title",null,"chevron-right"),(0,r.createElementVNode)("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"})],-1)];var Ve=ce(Pe,[["render",function(e,t,n,o,a,l){return(0,r.openBlock)(),(0,r.createElementBlock)("a",{class:(0,r.normalizeClass)(["he-tree__open-icon",{open:e.open}])},je,2)}]]);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Ae(){Ae=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,l=Object.create(a.prototype),i=new L(r||[]);return o(l,"_invoke",{value:O(e,n,i)}),l}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",f="suspendedYield",p="executing",g="completed",v={};function m(){}function y(){}function b(){}var x={};c(x,l,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(B([])));S&&S!==n&&r.call(S,l)&&(x=S);var k=b.prototype=m.prototype=Object.create(x);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(o,a,l,i){var s=u(e[o],e,a);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Ke(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,i)}))}i(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function O(t,n,r){var o=h;return function(a,l){if(o===p)throw Error("Generator is already running");if(o===g){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=u(t,n,r);if("normal"===c.type){if(o=r.done?g:f,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=g,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=u(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ke(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(D.prototype),c(D.prototype,i,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var l=new D(d(e,n,r,o),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},E(k),c(k,s,"Generator"),c(k,l,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return i.type="throw",i.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],i=l.completion;if("root"===l.tryLoc)return o("end");if(l.tryLoc<=this.prev){var s=r.call(l,"catchLoc"),c=r.call(l,"finallyLoc");if(s&&c){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return o(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ie(e,t,n,r,o,a,l){try{var i=e[a](l),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function He(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){Ie(a,r,o,l,i,"next",e)}function i(e){Ie(a,r,o,l,i,"throw",e)}l(void 0)}))}}var Me={class:"resource-tree"},ze={class:"mtl-ml"};const $e={__name:"Tool",props:{resource:String},setup:function(e){var t=e,n=(0,r.toRefs)(t).resource,o=(0,r.reactive)({treeData:[]}),a=(0,r.computed)((function(){var e=n.value;return e[0].toUpperCase()+e.slice(1)+" Tree"}));function l(){return i.apply(this,arguments)}function i(){return(i=He(Ae().mark((function e(){return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nova.request().post("/nova-vendor/model-tree/".concat(n.value),{tree:o.treeData});case 3:document.location.reload(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return(0,r.onMounted)(He(Ae().mark((function e(){var t;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nova.request().get("/nova-vendor/model-tree/".concat(n.value));case 2:t=e.sent,o.treeData=t.data.tree;case 4:case"end":return e.stop()}}),e)})))),function(e,t){var n=(0,r.resolveComponent)("Head"),i=(0,r.resolveComponent)("Heading"),s=(0,r.resolveComponent)("Card");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("div",null,[(0,r.createVNode)(n,{title:a.value},null,8,["title"]),(0,r.createVNode)(i,{class:"mb-6"},{default:(0,r.withCtx)((function(){return[(0,r.createTextVNode)((0,r.toDisplayString)(a.value),1)]})),_:1}),(0,r.createVNode)(s,{class:"flex flex-col items-center justify-center",style:{"min-height":"300px"}},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",Me,[(0,r.createVNode)((0,r.unref)(Fe),{class:"mtl-tree",modelValue:o.treeData,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.treeData=e}),treeLine:""},{default:(0,r.withCtx)((function(e){var t=e.node,n=e.stat;return[n.children.length?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Ve),{key:0,open:n.open,class:"mtl-mr",onClick:function(e){return n.open=!n.open}},null,8,["open","onClick"])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("span",ze,(0,r.toDisplayString)(t.text),1)]})),_:1},8,["modelValue"])])]})),_:1})]),(0,r.createElementVNode)("div",{class:"flex flex-col md:flex-row md:items-center justify-center md:justify-end space-y-2 md:space-y-0 md:space-x-3"},[(0,r.createElementVNode)("button",{onClick:l,class:"border text-left appearance-none cursor-pointer rounded text-sm font-bold focus:outline-none focus:ring ring-primary-200 dark:ring-gray-600 relative disabled:cursor-not-allowed inline-flex items-center justify-center shadow h-9 px-3 bg-primary-500 border-primary-500 hover:[&:not(:disabled)]:bg-primary-400 hover:[&:not(:disabled)]:border-primary-400 text-white dark:text-gray-900"},"Save")])],64)}}};var Ue=n(72),Re=n.n(Ue),We=n(140),Ye={insert:"head",singleton:!1};Re()(We.A,Ye);We.A.locals;const Xe=$e;Nova.booting((function(e,t){Nova.inertia("ModelTree",Xe)}))},140:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(314),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".resource-tree{background-color:#fff;border-radius:6px;max-width:600px;padding:24px;width:100%}",""]);const a=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var i=0;i<e.length;i++){var s=[].concat(e[i]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},351:()=>{},72:(e,t,n)=>{var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[];function i(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],c=n[s]||0,d="".concat(s," ").concat(c);n[s]=c+1;var u=i(d),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(l[u].references++,l[u].updater(h)):l.push({identifier:d,updater:v(h,t),references:1}),r.push(d)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var l=a(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var a=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(a,l[t]):e.appendChild(a)}}function f(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,g=0;function v(e,t){var n,r,o;if(t.singleton){var a=g++;n=p||(p=c(t)),r=h.bind(null,n,a,!1),o=h.bind(null,n,a,!0)}else n=c(t),r=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=i(n[r]);l[o].references--}for(var a=s(e,t),c=0;c<n.length;c++){var d=i(n[c]);0===l[d].references&&(l[d].updater(),l.splice(d,1))}n=a}}}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],i=!0,s=0;s<n.length;s++)(!1&a||l>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={416:0,757:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[l,i,s]=n,c=0;if(l.some((t=>0!==e[t]))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(s)var d=s(r)}for(t&&t(n);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=self.webpackChunkkrendil_model_tree=self.webpackChunkkrendil_model_tree||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0,r.O(void 0,[757],(()=>r(149)));var o=r.O(void 0,[757],(()=>r(351)));o=r.O(o)})();